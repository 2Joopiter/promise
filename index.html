<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    function test(delay, callback) {
      setTimeout(() => {
        callback();
      }, delay)
    }

    // 순서1 - start 콘솔 출력 (callstack)
    console.log('start');

    // 순서2 - test함수 호출 (callstack)
    // 순서3 - setTimeout 구문 외주 맡김 (web api가) + 다음코드 바로 실행 (callstack)
    // 순서7 - setTimeout 수행한 후 그 안의 test1 콘솔문을 callstack에 전달 (이때 이미 callstack에는 end까지 업무가 예약된 상태), 실행
    test(2000, () => {
      console.log('test1');
    });
    // 순서4 - 두번째 test 함수 호출 (callstack)
    // 순서5 - setTimeout 구문 외주 맡김 (web api가) + 다음코드 바로 실행 (callstack)
    // 순서8 - setTimeout 수행한 후 그 안쪽의 test2 콘솔문을 callstack에 전달, 실행
    test(2000, () => {
      console.log('test2');
    })
    // 순서6 - end 콘솔 출력
    console.log('end');

    // setTimeout이 자바가 아닌 외부에서 실행되느라 나갔다 오는 사이에 callstack에 쌓인 순번이 밀리게 되면서 test 함수가 늦게 실행됨


  </script>

</body>

</html>